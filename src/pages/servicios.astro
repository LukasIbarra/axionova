---
import MainLayout from "../layouts/MainLayout.astro";
import Navbar from "../components/Navbar.astro";
import Footer from "../components/Footer.astro";

interface Service {
  title: string;
  slug: string;
  icon: string;
  color: string;
  desc: string;
  bullets: string[];
}

interface BulletItem { text: string; icon?: string; }

// ▶ Data de “Servicios especializados”
const serviciosEspecializados: BulletItem[] = [
  {
    text:
      "Gestión del cambio e implementación de mejoras operativas — Aceleramos la adopción de nuevas prácticas en terreno, integrando herramientas Lean y modelos sociológicos para reducir resistencia y asegurar resultados sostenibles.",
    icon: "fa-solid fa-arrow-trend-up",
  },
  {
    text:
      "Optimización de procesos operativos y de mantenimiento — Disminuimos tiempos de reparación, entre fallas y uso de insumos en mina y planta.",
    icon: "fa-solid fa-screwdriver-wrench",
  },
  {
    text:
      "Optimización de tiempos y recursos — Reducción de materias primas, aumento de productividad y eficiencia en procesos de mantenimiento mina–planta, operaciones mina–planta y servicios de apoyo.",
    icon: "fa-solid fa-clock-rotate-left",
  },
];

// ▶ Beneficios
const beneficios: BulletItem[] = [
  { text: "Reducción de tiempos críticos en mantenimiento y operación.", icon: "fa-solid fa-stopwatch" },
  { text: "Disminución de fallas recurrentes y sobreconsumo de insumos y repuestos.", icon: "fa-solid fa-circle-minus" },
  { text: "Aumento de disponibilidad y cumplimiento de programas semanales.", icon: "fa-solid fa-calendar-check" },
  { text: "Aplicación de herramientas estadísticas, sociológicas y educacionales directamente en terreno.", icon: "fa-solid fa-chart-line" },
  { text: "Conocimiento operativo real de carguío, chancado, molienda, flotación, talleres, losas, bodegas y lubricación.", icon: "fa-solid fa-industry" },
  { text: "Consultoría regional, cercana y alineada a la excelencia operacional minera.", icon: "fa-solid fa-handshake" },
];

// ▶ Público objetivo / Contacto
const publicoObjetivo: string[] = [
  "Business Partners",
  "Gerentes de Operaciones",
  "Superintendentes de Mantenimiento, Operaciones Mina/Planta y Excelencia Operacional",
];

const contacto = {
  email: "contacto@axionova.cl",
  phone: "+56 9 0000 0000",
  location: "Andacollo / Coquimbo",
  web: "www.axionova.cl",
};

// ▶ Cards de servicios (catálogo)
const services: Service[] = [
  {
    title: "Extracción Inteligente",
    slug: "extraccion-inteligente",
    icon: "fa-solid fa-bolt",
    color: "text-blue-500",
    desc:
      "Automatizamos y optimizamos la extracción con IA, sensores IoT y control en tiempo real para maximizar la producción y reducir costos.",
    bullets: [
      "Optimización en tiempo real de equipos y rutas",
      "Sensórica IoT y telemetría unificada",
      "Planificación dinámica y mantenimiento predictivo",
    ],
  },
  {
    title: "Seguridad Total",
    slug: "seguridad-total",
    icon: "fa-solid fa-shield-halved",
    color: "text-blue-500",
    desc:
      "Monitoreo inteligente de riesgos con visión computacional, alertas tempranas y cumplimiento normativo automatizado.",
    bullets: [
      "Detección de EPP y zonas restringidas (visión computacional)",
      "Alertas en segundos y bitácoras automáticas",
      "Cumplimiento normativo y reportes auditables",
    ],
  },
  {
    title: "Análisis de Datos",
    slug: "analisis-de-datos",
    icon: "fa-solid fa-chart-line",
    color: "text-blue-500",
    desc:
      "Analítica avanzada para decidir con datos: tableros en vivo, modelos predictivos e integración con ERP/SCADA.",
    bullets: [
      "Cuadros de mando en tiempo real",
      "Modelos de pronóstico y simulación",
      "Integración con ERP/SCADA y data lakes",
    ],
  },
];
---

<MainLayout id="servicios" class="min-h-screen bg-white text-slate-900">
  <Navbar />
  <!-- HERO -->
  <section class="pt-[var(--nav-h)]">
    <div class="mx-auto max-w-7xl px-6 lg:px-12 py-10 lg:py-24 pt-24">
      <!-- Badge -->
      <span class="inline-flex items-center gap-2 text-sm font-medium px-4 py-2 rounded-full border border-green-200 bg-green-50 text-green-700">
        <i class="fa-solid fa-screwdriver-wrench"></i>
        Servicios
      </span>

      <!-- Título principal -->
      <h1 class="mt-6 text-4xl sm:text-5xl lg:text-6xl font-extrabold leading-tight text-blue-900">
        Soluciones para una
        <span class="bg-gradient-to-r from-orange-500 via-orange-400 to-orange-600 bg-clip-text text-transparent">Minería de Alto Desempeño</span>
      </h1>

      <!-- Subtítulo -->
      <p class="mt-4 text-lg text-slate-600 max-w-3xl">
        Aceleramos tu operación con tecnología de vanguardia: automatización, seguridad basada en IA y analítica lista para decisiones.
      </p>

      <!-- Botones -->
      <div class="mt-8 flex flex-wrap gap-4">
        <a href="#servicios-especializados" class="rounded-lg px-4 py-2.5 font-semibold bg-orange-600 text-white hover:bg-orange-700 transition">
          Ver servicios
        </a>
        <a href="/#contacto" class="rounded-lg px-5 py-3 font-semibold border border-orange-200 text-orange-700 hover:bg-orange-50 transition">
          Hablar con un experto
        </a>
      </div>
      <div class="py-6">
        <svg xmlns="http://www.w3.org/2000/svg" preserveAspectRatio="none" viewBox="0 0 773.74 70">
          <g>
            <!-- Azul oscuro inferior -->
            <path fill="#1e40af" d="M0 0h773.74L386.87 25Z"/>
            <!-- Azul claro superior -->
            <path fill="#3b82f6" d="m0 0 386.87 70L773.74 0Z" opacity=".7"/>
          </g>
        </svg>
      </div>

    </div>
  </section>


  <!-- SERVICIOS ESPECIALIZADOS -->
  <section id="servicios-especializados" class="scroll-mt-[calc(var(--nav-h)+12px)] mx-auto max-w-7xl px-6 lg:px-12 py-12 lg:py-16">
    
    
    <h2 class="text-3xl lg:text-4xl font-extrabold tracking-tight text-blue-900">
      Servicios especializados para la <span class="text-orange-600">Minería</span>
    </h2>
    
    <ul class="mt-6 space-y-5">
      {serviciosEspecializados.map((item) => (
        <li class="flex items-start gap-3 rounded-2xl border border-slate-200 bg-white/90 p-4 shadow-sm">
          <span class="mt-1 inline-flex h-8 w-8 items-center justify-center rounded-lg bg-green-50 text-green-600">
            <i class={item.icon ?? "fa-solid fa-circle-check"}></i>
          </span>
          <p class="text-slate-700">{item.text}</p>
        </li>
      ))}
    </ul>
  </section>

  <section class="mx-auto max-w-7xl px-6 lg:px-12 py-8">
    <div class="grid grid-cols-2 sm:grid-cols-4 gap-4">
      <div class="rounded-xl border border-slate-200 p-4 text-center">
        <div class="text-2xl font-extrabold text-[color:var(--brand-orange-600)]">-12%</div>
        <p class="text-slate-600 text-sm">MTTR en 8 semanas</p>
      </div>
      <div class="rounded-xl border border-slate-200 p-4 text-center">
        <div class="text-2xl font-extrabold text-[color:var(--brand-orange-600)]">+7 pts</div>
        <p class="text-slate-600 text-sm">Disponibilidad</p>
      </div>
      <div class="rounded-xl border border-slate-200 p-4 text-center">
        <div class="text-2xl font-extrabold text-[color:var(--brand-orange-600)]">-18%</div>
        <p class="text-slate-600 text-sm">Consumo de insumos</p>
      </div>
      <div class="rounded-xl border border-slate-200 p-4 text-center">
        <div class="text-2xl font-extrabold text-[color:var(--brand-orange-600)]">4–6 sem</div>
        <p class="text-slate-600 text-sm">Payback típico</p>
      </div>
    </div>
  </section>

  <!-- BENEFICIOS -->
  <section id="beneficios" class="mx-auto max-w-7xl px-6 lg:px-12 py-16">
    <div class="rounded-2xl bg-white px-6 lg:px-10 py-12 shadow-sm">
      <h2 class="text-2xl lg:text-3xl font-extrabold bg-gradient-to-r from-blue-500 via-blue-400 to-blue-600 bg-clip-text text-transparent text-center mb-10">
        Beneficios y Diferenciadores
      </h2>

      <div class="grid gap-6 lg:grid-cols-2 max-w-5xl mx-auto">
        <!-- Primera columna -->
        <ul class="space-y-4">
          {beneficios.slice(0, 3).map((b) => (
            <li class="flex items-start gap-3 text-slate-700">
              <span class="mt-1 inline-flex h-6 w-6 flex-shrink-0 items-center justify-center text-green-600">
                <i class={b.icon ?? "fa-solid fa-circle-check"}></i>
              </span>
              <p>{b.text}</p>
            </li>
          ))}
        </ul>

        <!-- Segunda columna -->
        <ul class="space-y-4">
          {beneficios.slice(3, 6).map((b) => (
            <li class="flex items-start gap-3 text-slate-700">
              <span class="mt-1 inline-flex h-6 w-6 flex-shrink-0 items-center justify-center text-green-600">
                <i class={b.icon ?? "fa-solid fa-circle-check"}></i>
              </span>
              <p>{b.text}</p>
            </li>
          ))}
        </ul>
      </div>
    </div>
  </section>

  <!-- CARDS (CATÁLOGO) -->
  <section id="lista-servicios" class="scroll-mt-[calc(var(--nav-h)+12px)] mx-auto max-w-7xl px-6 lg:px-12 pb-16 lg:pb-24">
    <div class="grid gap-6 sm:grid-cols-2 lg:grid-cols-3">
      {services.map((s) => (
        <article class="group relative overflow-hidden rounded-2xl border border-slate-200 bg-white p-6 lg:p-7 shadow-sm hover:shadow-lg transition flex flex-col">
          <!-- header -->
          <div class="flex items-center gap-3">
            <span class="inline-flex h-10 w-10 items-center justify-center rounded-xl
                        bg-[color:var(--brand-orange-50)] text-[color:var(--brand-orange-600)]">
              <i class={s.icon}></i>
            </span>
            <h3 class="text-xl font-bold text-blue-900">{s.title}</h3>
          </div>

          <p class="mt-4 text-slate-600">{s.desc}</p>

          <ul class="mt-5 space-y-2.5">
            {s.bullets.map((b) => (
              <li class="flex items-start gap-2.5">
                <i class="fa-solid fa-circle-check mt-0.5 text-[color:var(--brand-orange-600)]"></i>
                <span class="text-slate-700">{b}</span>
              </li>
            ))}
          </ul>

          <!-- CTA al fondo y centrado -->
          <div class="mt-auto pt-6 flex justify-center">
            <a href="/#contacto" class="rounded-lg px-5 py-3 font-semibold bg-orange-600 text-white hover:bg-orange-700 transition">Solicitar consultoría</a>
          </div>

          <!-- Glow naranja -->
          <div class="pointer-events-none absolute inset-0 rounded-2xl ring-0 ring-orange-200/0 group-hover:ring-8 group-hover:ring-orange-50 transition"></div>
        </article>

      ))}
    </div>
  </section>

  <!-- CTA FINAL -->
  <section class="relative border-t border-slate-200 bg-white">
    <div class="mx-auto max-w-7xl px-6 lg:px-12 py-14 lg:py-16">
      <div class="flex flex-col lg:flex-row items-center justify-between gap-6">
        <div>
          <h3 class="text-2xl lg:text-3xl font-extrabold bg-gradient-to-r from-blue-500 via-blue-400 to-blue-600 bg-clip-text text-transparent">¿Listo para comenzar?</h3>
          <p class="text-slate-600 mt-2">Agenda una llamada y te ayudaremos.</p>
        </div>
        <div class="flex gap-3">
          <a href="/#contacto" class="rounded-lg px-5 py-3 font-semibold bg-orange-600 text-white hover:bg-orange-700 transition">
            Solicitar consultoría
          </a>
          <a href="/" class="rounded-lg px-5 py-3 font-semibold border border-blue-200 text-blue-700 hover:bg-blue-50 transition">
            Volver al inicio
          </a>
        </div>
      </div>
    </div>
  </section>

  <Footer />
</MainLayout>


<!-- Glow en hover para las cards (sin TS assertions) -->
<script>
  window.addEventListener("mousemove", (e: MouseEvent) => {
    const cards = document.querySelectorAll("article.group");
    cards.forEach((el) => {
      if (!(el instanceof HTMLElement)) return;
      const rect = el.getBoundingClientRect();
      if (!rect.width || !rect.height) return;

      const x = ((e.clientX - rect.left) / rect.width) * 100;
      const y = ((e.clientY - rect.top) / rect.height) * 100;

      el.style.setProperty("--x", x + "%");
      el.style.setProperty("--y", y + "%");
    });
  });
</script>

<style>
  article.group { position: relative; --x:50%; --y:50%; }
  article.group::after{
    content:""; position:absolute; inset:-1px; pointer-events:none; border-radius:1rem;
    background: radial-gradient(
      140px 140px at var(--x) var(--y),
      rgba(255,125,24,.16),
      rgba(255,125,24,.08) 35%,
      transparent 60%
    );
    transition: background 120ms ease-out;
  }
</style>
